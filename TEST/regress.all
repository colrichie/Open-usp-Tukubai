#!/usr/local/bin/bash -xv

exec 2> /tmp/log.$(basename $0)

tmp=/tmp/$$

dir=$(dirname $0)
cd $dir

cat << FIN > $tmp-ver
python2.7
python2.6
python2.5
python2.4
FIN

cat $tmp-ver	|
while read com ; do
	./yarr.test $com
	./self.test $com
	./nameread.test $com
	./check_need_name.test $com
	./cjoin0.test $com
	./cjoin1.test $com
	./cjoin2.test $com
done

#####################################
#support of 3.x

cat << FIN > $tmp-ver
python3.1
python3.2
FIN

cat $tmp-ver	|
while read com ; do
	./yarr.test $com
	./self.test $com
	./check_need_name.test $com
	./cjoin0.test $com
	./cjoin1.test $com
	./cjoin2.test $com
done

rm -f $tmp-*
exit 0
